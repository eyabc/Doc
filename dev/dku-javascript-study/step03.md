# Step3
ì£¼ì œ : this, í™”ì‚´í‘œ í•¨ìˆ˜

## this
### by ì •ì›…
- ì˜ˆì œì—ì„œ 'this is test' ì „ì—­ ê°ì²´ì—ì„œ sayFoo ë¥¼ í˜¸ì¶œí•˜ì˜€ê¸° ë•Œë¬¸ì— thisëŠ” ì „ì—­ ê°ì²´ë¡œ ë°”ì¸ë”© ëœë‹¤. 
ì´ë•Œ this ë°”ì¸ë”© íŠ¹ì„±ì€ ë‚´ë¶€ í•¨ìˆ˜ ë˜ëŠ” callback í•¨ìˆ˜ í˜¸ì¶œí–ˆì„ ê²½ìš° ì—ë„ ê·¸ëŒ€ë¡œ ì ìš©ëœë‹¤.

```javascript
var value = 100
var myObject = {
    value : 1,
    func1 : function()  {
        this.value += 1
        console.log('func1 called value is ' + this.value)
        func2 = function () {
            this.value += 1
            console.log('func2 called value is ' + this.value)
            func3 = function () {
                this.value += 1
                console.log('func3 called value is ' + this.value)
            }
            func3()
        }
        func2()
    }
}
myObject.func1()
/* ì¶œë ¥ ê²°ê³¼
func1 called value is 2
func2 called value is 101
func3 called value is 102
*/
```
---
- ìƒì„±ì í•¨ìˆ˜ ë™ì‘ ë°©ì‹
new ì—°ì‚°ìë¡œ í•¨ìˆ˜ í˜¸ì¶œì‹œ ë™ì‘ ë°©ì‹

1. ë¹ˆ ê°ì²´ ìƒì„± ë° this ë°”ì¸ë”©
    - ê°€ì¥ ë¨¼ì € ë¹ˆ ê°ì²´ê°€ ìƒì„±ëœë‹¤
    - ì´ ê° ì²´ëŠ” thisë¡œ ë°”ì¸ë”© ëœë‹¤
    - ë”°ë¼ì„œ ìƒì„±ì í•¨ìˆ˜ ì½”ë“œ ë‚´ë¶€ì—ì„œ this ëŠ” ì´ ë¹ˆ ê°ì²´ë¥¼ ê°€ë¦¬í‚¨ë‹¤
    - ì—¬ê¸°ì„œ ì—„ë°€íˆ ë”°ì§€ë©´ ë¹ˆ ê°ì²´ëŠ” ì•„ë‹ˆë‹¤ (ì•„ë˜ ë‚´ìš© ì°¸ê³ )  
JS ê°ì²´ ìƒì„± ê·œì¹™ ğŸ‘‰ JSì—ì„œ ëª¨ë“  ê°ì²´ëŠ” ìì‹ ì˜ ë¶€ëª¨ì¸ í”„ë¡œí†  íƒ€ì… ê°ì²´ì™€ ì—°ê²°ë˜ì–´ ìˆìœ¼ë©° ë¶€ëª¨ì˜ í”„ë¡œí¼í‹°ë‚˜ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ”ë° ìƒì„±ì í•¨ìˆ˜ê°€ ìƒì„±í•œ ê°ì²´ëŠ” ìì‹ ì„ ìƒì„±í•œ ìƒì„±ì í•¨ìˆ˜ì˜ prototype í”„ë¡œí¼í‹°ê°€ ê°€ë¦¬í‚¤ëŠ” ê°ì²´ë¥¼ ìì‹ ì˜ í”„ë¡œí†  íƒ€ì… ê°ì²´ë¡œ ì„¤ì •í•œë‹¤

2. thisë¥¼ í†µí•œ í”„ë¡œí¼í‹° ìƒì„±  
ì´í›„ì— í•¨ìˆ˜ ì½”ë“œ ë‚´ë¶€ì—ì„œ thisë¥¼ ì‚¬ìš©í•˜ì—¬ ì•ì—ì„œ ìƒì„±ëœ ë¹ˆ ê°ì²´ì— ë™ì ìœ¼ë¡œ í”„ë¡œí¼í‹°ë‚˜ ë©”ì„œë“œë¥¼ ìƒì„±í•  ìˆ˜ ìˆê²Œ ëœë‹¤

3. ìƒì„±ëœ ê°ì²´ ë¦¬í„´  
ê°€ì¥ ì¼ë°˜ì ì¸ ê²½ìš° íŠ¹ë³„í•œ ë¦¬í„´ë¬¸ì´ ì—†ëŠ” ê²½ìš° this ë¡œ ë°”ì¸ë”© ëœ ìƒˆë¡œ ìƒì„±í•œ ê°ì²´ê°€ ë¦¬í„´ëœë‹¤. ì´ëŠ” ëª…ì‹œì ìœ¼ë¡œ thisë¥¼ ë¦¬í„´í•œ ê°’ê³¼ ë™ì¼í•˜ë‹¤. this ê°€ ì•„ë‹Œ ê°ì²´ë¥¼ ë¦¬í„´í•˜ëŠ”ê±´ ì´í›„ì— ë‹¤ë£¨ë„ë¡ í•œë‹¤.
```javascript
// ìƒì„±ì í•¨ìˆ˜ëŠ” ê´€ë¡€ì ìœ¼ë¡œ ì²« ê¸€ìëŠ” ëŒ€ë¬¸ì ì´ë¦„ ì‚¬ìš©
var Person = function (name) {
    /* â­ï¸ ì•„ë˜ ì½”ë“œê°€ ì‹¤í–‰ë˜ê¸° ì „ì— ë¹ˆ ê°ì²´ë¥¼ ìƒì„± í›„ Person() ì˜
    prototype í”„ë¡œí¼í‹°ê°€ ê°€ë¦¬í‚¤ëŠ” ê°ì²´, Person.prototype,
    ë¥¼ [[Prototype]] ë§í¬ë¡œ ì—°ê²°í•˜ì—¬
    ìì‹ ì˜ í”„ë¡œí† íƒ€ì…ìœ¼ë¡œ ì„¤ì • í›„ thisë¡œ ë°”ì¸ë”© */
    this.name = name
    /* thisê°€ ê°€ë¦¬í‚¤ëŠ” ë¹ˆ ê°ì²´ì— ë™ì ìœ¼ë¡œ name í”„ë¡œí¼í‹° ìƒì„± */
    /* íŠ¹ë³„íˆ ë¦¬í„´ê°’ì´ ì—†ëŠ” ê²½ìš° thisë¡œ ë°”ì¸ë”©ëœ ì´ ê°ì²´ê°€ ë¦¬í„´ë¨ */
}
var foo = new Person('foo')
```
---
- ë¦¬í„°ëŸ´ vs ìƒì„±ì ê°ì²´ ìƒì„±


```javascript
// ë¦¬í„°ëŸ´ ë°©ì‹ : 1 ë²ˆë§Œ ìƒì„± ê°€ëŠ¥
var foo = {
    name : 'foo',
    age : 35,
    gender : 'man'
}
console.dir(foo)

/* ì¶œë ¥ ê²°ê³¼
Object
age: 35
gender: "man"
name: "foo"
__proto__: Object */

// ìƒì„±ì í•¨ìˆ˜ : ì—¬ëŸ¬ë²ˆ ìƒì„± ê°€ëŠ¥
function Person (name, age, gender, position) {
    this.name = name
    this.age = age
    this.gender = gender
}

// Person ìƒì„±ì ê°ì²´ ìƒì„±
var bar = new Person ('bar', 33, 'woman')
console.dir(bar)

/* ì¶œë ¥ ê²°ê³¼
Person
age: 33
gender: "woman"
name: "bar"
__proto__: Object */
```
ë¦¬í„°ëŸ´ ë°©ì‹ê³¼ ìƒì„±ì ë°©ì‹ì˜ ì°¨ì´ëŠ” í”„ë¡œí† íƒ€ì… ê°ì²´ (__proto__ í”„ë¡œí¼í‹°) ì— ìˆë‹¤. ê°ì²´ ë¦¬í„°ëŸ´ì˜ ê²½ìš° Object.prototype ì„ ìƒì„±ìì˜ ê²½ìš° Person.prototype ì„ í”„ë¡œí¼í‹°ë¡œ ê°€ì§„ë‹¤.

ì´ëŠ” ìœ„ì—ì„œ ì„¤ëª…í•œ JS ê°ì²´ ìƒì„± ê·œì¹™ ì— ë”°ë¼ ë¦¬í„°ëŸ´ì—ì„  ê°ì²´ ìƒì„±ìê°€ Object() ì´ê³  ìƒì„±ìì—ì„  ìƒì„±ìê°€ Person() í•¨ìˆ˜ì´ê¸° ë•Œë¬¸ì´ë‹¤.

new ë¥¼ ì´ìš©í•œ ìƒì„±ì í•¨ìˆ˜ì—ì„œ thisëŠ” ë¹ˆ ê°ì²´ì— ë°”ì¸ë”© ëœë‹¤ê³  ìœ„ì—ì„œ ë‹¤ë£¨ì—ˆë‹¤. í•˜ì§€ë§Œ new í‚¤ì›Œë“œ ì—†ì´ ìƒì„±ì í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê²Œ ë˜ë©´ ë¹ˆ ê°ì²´ê°€ ì•„ë‹Œ ê¸€ë¡œë²Œ ê°ì²´ì— thisê°€ ë°”ì¸ë”© ë˜ì–´ ê¸€ë¡œë²Œ ê°ì²´ì— í”„ë¡œí¼í‹°ë¥¼ ìƒì„±í•œë‹¤. ì¦‰, ë”ì°í•œ ì¼ì´ ë°œìƒí•œë‹¤. ì£¼ì˜í•˜ì !

---
ì¼ë°˜ í•¨ìˆ˜ì˜ ê²½ìš° ëª¨ë“  ìƒˆë¡œìš´ í•¨ìˆ˜ëŠ” ìì‹ ì˜ this ê°’ì´ JS ì—”ì§„ì— ë™ì ìœ¼ë¡œ ì •í•´ì§„ë‹¤. 

### by í˜•ìš±
/*ë¦¬í„°ëŸ´ ë°©ì‹ê³¼ ìƒì„±ì í•¨ìˆ˜ì˜ ì°¨ì´
ê¸°ë³¸ì ìœ¼ë¡œ ë¦¬í„°ëŸ´ì´ë€ ì»´í“¨í„°ìª½ì—ì„œ ì†ŒìŠ¤ ì½”ë“œì˜ ê³ ì •ëœ ê°’ì„ ëŒ€í‘œí•˜ëŠ” ìš©ì–´ë‹¤.
ê³ ì •ëœ ê°’ì„ ì‚¬ìš©í•˜ëŠ” ë¦¬í„°ëŸ´ ë°©ì‹ì— ë¹„í•´ ìƒì„±ì í•¨ìˆ˜ëŠ” í•„ìš”ì— ë”°ë¼ ë‹¤ì–‘í•œ í”„ë¡œí¼í‹°ë¥¼ ê°€ì§€ëŠ” ê°ì²´ë¥¼ ìƒì„±í• ìˆ˜ìˆë‹¤.
 */
 
---
 
 /* í™”ì‚´í‘œ í•¨ìˆ˜(thisì— ë°”ì¸ë”©í•  ê°ì²´ê°€ ì •ì )  vs ì¼ë°˜ í•¨ìˆ˜(thisì— ë°”ì¸ë”©í•  ê°ì²´ê°€ ë™ì ) => thisì˜ ì°¨ì´

### by ë…¸ì›
- addEventListener í•¨ìˆ˜ëŠ” ì½œë°± í•¨ìˆ˜ë¥¼ ì„ ì–¸í•  ë•Œ ìì‹ ì˜ this ë¥¼ ìƒì†í•˜ë„ë¡ ì„¤ì •ë˜ì–´ ìˆë‹¤.

### by ì¤€ì¼
```text
ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ëŠ” ì‹¤í–‰í•  ì½”ë“œì— ì œê³µí•  í™˜ê²½ ì •ë³´ë“¤ì„ ëª¨ì•„ë†“ì€ ê°ì²´ì´ë‹¤.
ì „ì—­ ê³µê°„ì—ì„œ ìë™ìœ¼ë¡œ ìƒì„±ë˜ëŠ” ì „ì—° ì»¨í…ìŠ¤íŠ¸
evalí•¨ìˆ˜
í•¨ìˆ˜ ì‹¤í–‰ì— ì˜í•œ ì»¨í…ìŠ¤íŠ¸
ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ê°ì²´ëŠ” í™œì„±í™” ë˜ëŠ” ì‹œì ì— VariableEnviroment, LexcialEnvrionment, ThisBindingì˜ ì„¸ ê°€ì§€ ì •ë³´ë¥¼ ìˆ˜ì§‘í•œë‹¤.
ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ë¥¼ ìƒì„œí•  ë•Œ VariableEnvironmentì™€ LexicalEnvironmentê°€ ë™ì¼í•œ ë‚´ìš©ìœ¼ë¡œ êµ¬ì„±ëœë‹¤.
LexicalEnvironmentëŠ” í•¨ìˆ˜ ì‹¤í–‰ ë„ì¤‘ì— ë³€ê²½ë˜ëŠ” ì‚¬í•­ì´ ì¦‰ì‹œ ë°˜ì˜ëœë‹¤.
LexicalEnvironmentì™€ VariableEnvironmentëŠ” ë‹¤ìŒê³¼ environmentRecordì™€ outerEnvironmentReferenceë¡œ êµ¬ì„±ë¼ ìˆë‹¤.
environmentRecordëŠ” ë§¤ê°œë³€ìˆ˜ ì‹ë³„ì, ë³€ìˆ˜ ì‹ë³„ì, ì„ ì–¸í•œ í•¨ìˆ˜ì˜ ì‹ë³„ì ë“±ì„ ìˆ˜ì§‘í•œë‹¤.
ì´ê²ƒ ë•Œë¬¸ì— í˜¸ì´ìŠ¤íŒ…ì´ë¼ëŠ” ê°œë…ì´ ì‚¬ìš©ëœë‹¤.
í˜¸ì´ìŠ¤íŒ…ì€ ì½”ë“œ í•´ì„ì„ ì¢€ ë” ìˆ˜ì›”í•˜ê²Œ í•˜ê¸° ìœ„í•´ environmentRecordì˜ ìˆ˜ì§‘ ê³¼ì •ì„ ì¶”ìƒí™”í•œ ê°œë…ì´ë‹¤.
ë³€ìˆ˜ ì„ ì–¸ë¶€ì™€ í•¨ìˆ˜ ì„ ì–¸ë¬¸ì— í˜¸ì´ìŠ¤íŒ…ì´ ë°œìƒí•œë‹¤.
í•¨ìˆ˜ í‘œí˜„ì‹ì„ ì‚¬ìš©í•  ê²½ìš° í•¨ìˆ˜ì˜ ì„ ì–¸ë¶€ë§Œ í˜¸ì´ìŠ¤íŒ…ì´ ë°œìƒí•œë‹¤.
outerEnvironmentReferenceëŠ” ìƒìœ„(ì§ì „) ì»¨í…ìŠ¤íŠ¸ì˜ LexcicalEnviroment ì •ë³´ë¥¼ ì°¸ì¡°í•œë‹¤.
ì´ê²ƒ ë•Œë¬¸ì— ìŠ¤ì½”í”„ê°€ í˜•ì„±ë˜ê³ , ìŠ¤ì½”í”„ ì²´ì¸ì„ í†µí•´ ìƒìœ„ ì»¨í…ìŠ¤íŠ¸ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.
ìŠ¤ì½”í”„ëŠ” ë³€ìˆ˜ì˜ ìœ íš¨ë²”ìœ„ë¥¼ ë§í•œë‹¤.  
```
  
### by ìœ ë¦¼
- [ì°¸ê³ ] í•¨ìˆ˜ vs ë©”ì„œë“œ  
ì–´ë–¤ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ëŠ” ë°©ë²•ì€ ì—¬ëŸ¬ ê°€ì§€ê°€ ìˆëŠ”ë°, ëŒ€í‘œì ì¸ ë°©ë²•ì€ í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œí•˜ëŠ” ê²½ìš°ì™€ ë©”ì„œë“œë¡œì„œ í˜¸ì¶œí•˜ëŠ” ê²½ìš°ì´ë‹¤.
    ```javascript
    
    var func = function (x){
        console.log(this, x);
    };
    func(1) // Window { ... } 1 => í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œë¨
    
    var obj = {
        method: func  // obj ê°ì²´ì˜ method í”„ë¡œí¼í‹°ì— ì•ì—ì„œ ë§Œë“  func í•¨ìˆ˜ë¥¼ í• ë‹¹
    };
    obj.method(1); // { method: f } 1 => ë©”ì„œë“œë¡œì„œ í˜¸ì¶œë¨
    obj['method'](2); // { method: f } 2 => ë©”ì„œë“œë¡œì„œ í˜¸ì¶œë¨
    ```

### to ë…¸ì›
- ì¶œì²˜ë¥¼ ë‚¨ê²¨ì£¼ì„¸ìš”.
- this ê°€ ì„ ì–¸ë˜ëŠ” êµ¬ì—­ì— ë”°ë¼ ì˜ë¯¸ê°€ ë‹¬ë¼ì§„ë‹¤. `í•¨ìˆ˜ì™€ ë©”ì†Œë“œë¥¼ ë¶„ë¦¬í•˜ëŠ” ê¸°ëŠ¥ì„ í•œë‹¤.` 
ê°€ ì´í•´ê°€ ì˜ ì•ˆë©ë‹ˆë‹¤.
- ì²˜ìŒ ë³¸ ë‚´ìš©ì´, êµ¬ê¸€ì—ì„œë„ ì•ˆë‚˜ì˜¤ëŠ”ë° ì¶œì²˜ê°€ ì–´ë–»ê²Œë˜ë‚˜ìš”?  
`ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ í•¨ìˆ˜ì™€ ë©”ì†Œë“œë¥¼ êµ¬ë¶„í•˜ëŠ” ê¸°ì¤€ì€ ê°ì²´ì— ëŒ€í•˜ì—¬ ë…ë¦½ë˜ì–´ìˆëŠ”ê°€ì˜ ì—¬ë¶€ì´ë‹¤.
  ê°ì²´ ë‚´ì— í• ë‹¹ëœë‹¤ê³  í•´ì„œ ë¬´ì¡°ê±´ ë©”ì†Œë“œê°€ ì•„ë‹ˆë¼. ê°ì²´ì˜ ë©”ì†Œë“œë¡œì„œ í˜¸ì¶œì´ ë˜ì–´ì•¼ ë©”ì†Œë“œë¡œ ê°„ì£¼í•  ìˆ˜ ìˆë‹¤.`


## í™”ì‚´í‘œ í•¨ìˆ˜
### by ì •ì›…
ì½”ë“œ ë°”ë¡œ ë°”ê¹¥ í•¨ìˆ˜ ë˜ëŠ” class ì˜ this ê°’ì´ ì‚¬ìš© ëœë‹¤.

---
- ë©”ì†Œë“œë¡œ í™”ì‚´í‘œ í•¨ìˆ˜ â­ï¸
```javascript
const Person = {
    name : 'JeongShin',
    // this ê°€ í•´ë‹¹ ê°ì²´ì— ë°”ì¸ë”© ë˜ì§€ ì•Šê³  ì „ì—­ ê°ì²´ë¥¼ ê°€ë¦¬í‚´
    sayName: () => console.log(`Hi my name is ${this.name}`)
}
Person.sayName() // Hi my name is undefined
```
ìœ„ì˜ ì¼ë°˜ í•¨ìˆ˜ê°€ í•´ë‹¹ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œ í•¨ìˆ˜ì— this ê°€ ë°”ì¸ë”© ë˜ëŠ”ê²ƒê³¼ ë‹¤ë¥´ê²Œ ë™ì‘í•œë‹¤.

--- 
  
- í™”ì‚´í‘œ ì½œë°± í•¨ìˆ˜  
ì½œë°± í•¨ìˆ˜ë¥¼ í™”ì‚´í‘œ í•¨ìˆ˜ë¡œ ì •ì˜í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ ì‹¤ìˆ˜ê°€ë‚  ìˆ˜ ìˆë‹¤.
```javascript
var btn = document.getElementById('button')
btn.addEventListener('click', () =>{
    console.log(this === window); // this ê°€ ì „ì—­ ê°ì²´ì— ë°”ì¸ë”©
    this.innerHTML = 'btn clicked'
})
```
í™”ì‚´í‘œ í•¨ìˆ˜ì—ì„œ this ëŠ” ì „ì—­ ê°ì²´ì´ë‹¤. ë”°ë¼ì„œ btn ì— this ë¥¼ ë°”ì¸ë”© í•˜ê¸° ìœ„í•´ì„œëŠ”

ì˜¤íƒ€ë‚œ ë¶€ë¶„ ` function => ()` ìˆ˜ì •
```javascript
var btn = document.getElementById('button')
btn.addEventListener('click', function () {
    console.log(this === btn); // this ê°€ btn ì— ë°”ì¸ë”©
    this.innerHTML = 'btn clicked'
})
```
ì™€ ê°™ì´ í•´ì£¼ë©´ ëœë‹¤.

### to ì •ì›…
Q. í™”ì‚´í‘œ í•¨ìˆ˜ëŠ” ìƒì„±ìë¡œ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤. ì™œ í™”ì‚´í‘œ í•¨ìˆ˜ì—ëŠ” ìƒì„±ìê°€ ì—†ì„ê¹Œ? ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ì² í•™ì´ ê¶ê¸ˆí•˜ë‹¤.  
ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œëŠ” new í‚¤ì›Œë“œì™€ í•¨ìˆ˜ëª…ì„ ë”í•´ì£¼ì–´ í•´ë‹¹ í•¨ìˆ˜ë¥¼ ìƒì„±ìë¡œ ì‚¬ìš©í•œë‹¤. í•˜ì§€ë§Œ í™”ì‚´í‘œ í•¨ìˆ˜ëŠ” ìƒì„±ìë¡œ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.

---


### to í˜•ìš±
ê°œë…ì´ ê¹”ë”í•˜ê²Œ ì˜ ì •ë¦¬ë˜ì–´ ìˆì–´ì„œ ë³µìŠµí• ë•Œ ìœ ìš©í–ˆìŠµë‹ˆë‹¤.

---
Q. ì‹¤í–‰ê²°ê³¼ì—ì„œ ì–´ë–»ê²Œ ...bar() ê°€ ê°€ë¦¬í‚¤ëŠ” this ê°€ call ê³¼ ë¬´ê´€í•˜ê²Œ ë™ì‘ë˜ë‚˜ìš”? 
```javascript
function createObject() {
    console.log('Inside `createObject`:', this.foo, this);
    return {
        foo: 42,
        bar: function() {
            console.log('Inside `bar`:', this.foo, this);
        },
    };
}
createObject.call({foo: 21}).bar();

/*
Inside `createObject`: 21, {foo: 21}
Inside `bar`: 42, bar: f
*/
```
A. 
