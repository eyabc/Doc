(window.webpackJsonp=window.webpackJsonp||[]).push([[167],{577:function(t,s,a){"use strict";a.r(s);var n=a(44),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"item21-인터페이스는-구현하는-쪽을-생각해-설계하라"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#item21-인터페이스는-구현하는-쪽을-생각해-설계하라"}},[t._v("#")]),t._v(" ITEM21 인터페이스는 구현하는 쪽을 생각해 설계하라")]),t._v(" "),a("h2",{attrs:{id:"default-method"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#default-method"}},[t._v("#")]),t._v(" Default Method")]),t._v(" "),a("p",[t._v("자바8, "),a("strong",[t._v("기존 인터페이스에 메서드를 추가")]),t._v("할 수 있는 방법")]),t._v(" "),a("p",[a("strong",[t._v("핵심 컬렉션 인터페이스")]),t._v("에 디폴트 메서드가 추가 되었다.")]),t._v(" "),a("ul",[a("li",[t._v("주로 "),a("strong",[t._v("람다")]),t._v("를 활용하기 위함")]),t._v(" "),a("li",[t._v("자바 라이브러리의 디폴트 메서드는 코드품질이 높고 범용적 → 대부분 잘 작동")])]),t._v(" "),a("h2",{attrs:{id:"주의-사항"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#주의-사항"}},[t._v("#")]),t._v(" 주의 사항")]),t._v(" "),a("h3",{attrs:{id:"불변식을-해치지-않는-디폴트-메서드-작성의-어려움"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#불변식을-해치지-않는-디폴트-메서드-작성의-어려움"}},[t._v("#")]),t._v(" 불변식을 해치지 않는 디폴트 메서드 작성의 어려움")]),t._v(" "),a("h4",{attrs:{id:"문제점"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#문제점"}},[t._v("#")]),t._v(" 문제점")]),t._v(" "),a("p",[t._v("자바 8 의 Collection 인터페이스에 추가된 removeIf 디폴트 메서드")]),t._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeIf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Predicate")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("E")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" filter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Objects")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("requireNonNull")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("filter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" result "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Iterator")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("E")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" it "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("iterator")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" it"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasNext")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("filter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("test")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("it"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            it"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            result "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br")])]),a("p",[a("code",[t._v("apache.commons.collections4.collection.SynchronizedCollection")])]),t._v(" "),a("ul",[a("li",[t._v("클라이언트가 제공한 객체로 락을 거는 능력을 추가로 제공")]),t._v(" "),a("li",[t._v("모든 메서드에서 주어진 락 객체로 동기화 한 후 내부 컬렉션 객체에 위임하는 래퍼클래스")]),t._v(" "),a("li",[a("code",[t._v("removeIf")]),t._v(" 와 맞지 않음 (effective java 3판 작성시점)\n"),a("ul",[a("li",[t._v("removeIf 의 구현은 동기화에 대해 모르므로 락 객체를 사용할 수 없다.")])])])]),t._v(" "),a("h4",{attrs:{id:"해결-방안"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#해결-방안"}},[t._v("#")]),t._v(" 해결 방안")]),t._v(" "),a("ul",[a("li",[t._v("구현한 인터페이스의 디폴트 메서드 재정의")])]),t._v(" "),a("p",[t._v("자바 플랫폼에 속하지 않은 제 3의 기존 컬렉션 구현체에서는 여전히 수정되지 않고 있을 수 있다.")]),t._v(" "),a("hr"),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"디폴트-메서드는-컴파일에-성공하더라도-기존-구현체에-런타임-오류를-일으킬-수-있다"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#디폴트-메서드는-컴파일에-성공하더라도-기존-구현체에-런타임-오류를-일으킬-수-있다"}},[t._v("#")]),t._v(" 디폴트 메서드는 컴파일에 성공하더라도 기존 구현체에 런타임 오류를 일으킬 수 있다.")]),t._v(" "),a("p",[t._v("흔한일은 아니지만 일어날 수 있다.")]),t._v(" "),a("h3",{attrs:{id:"기존-인터페이스에-디폴트-메서드로-새-메서드를-추가하는-일은-꼭-필요한-경우가-아니면-피한다"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#기존-인터페이스에-디폴트-메서드로-새-메서드를-추가하는-일은-꼭-필요한-경우가-아니면-피한다"}},[t._v("#")]),t._v(" 기존 인터페이스에 디폴트 메서드로 새 메서드를 추가하는 일은 꼭 필요한 경우가 아니면 피한다.")]),t._v(" "),a("p",[t._v("디폴트 메서드가 기존 구현체들과 충돌하지 않는지 고려한다.")]),t._v(" "),a("p",[t._v("새로운 인터페이스를 만드는 경우라면 유용한 수단이다.")]),t._v(" "),a("h3",{attrs:{id:"디폴트-메서드는-인터페이스로부터-메서드를-제거하거나-기존-메서드의-시그니처를-수정하는-용도가-아니다"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#디폴트-메서드는-인터페이스로부터-메서드를-제거하거나-기존-메서드의-시그니처를-수정하는-용도가-아니다"}},[t._v("#")]),t._v(" 디폴트 메서드는 인터페이스로부터 메서드를 제거하거나 기존 메서드의 시그니처를 수정하는 용도가 아니다.")]),t._v(" "),a("p",[t._v("이런 형태로 인터페이스를 변경하면 기존 클라이언트를 망가뜨리게 된다.")]),t._v(" "),a("h3",{attrs:{id:"새로운-인터페이스라면-릴리스-전에-반드시-테스트를-거쳐야-한다"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#새로운-인터페이스라면-릴리스-전에-반드시-테스트를-거쳐야-한다"}},[t._v("#")]),t._v(" 새로운 인터페이스라면 릴리스 전에 반드시 테스트를 거쳐야 한다.")]),t._v(" "),a("p",[t._v("인터페이스를 릴리즈 한 후의 결함 수정 가능성에 대해 기대서는 안된다.")])])}),[],!1,null,null,null);s.default=e.exports}}]);