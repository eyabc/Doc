(window.webpackJsonp=window.webpackJsonp||[]).push([[152],{563:function(s,a,t){"use strict";t.r(a);var n=t(44),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"item8-finalizer-와-cleaner-사용을-피하라"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#item8-finalizer-와-cleaner-사용을-피하라"}},[s._v("#")]),s._v(" ITEM8 finalizer 와 cleaner 사용을 피하라")]),s._v(" "),t("p",[s._v("이번 내용은 잘 와닿지 않아서 내용을 적기만 하였습니다. 얼마나 의미가 있을까 모르겠네요\n"),t("code",[s._v("try-with-resources")]),s._v("를 위한 내용인 것 같기도 합니다.")]),s._v(" "),t("h2",{attrs:{id:"문제점들"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#문제점들"}},[s._v("#")]),s._v(" 문제점들")]),s._v(" "),t("p",[s._v("자바의 두가지 객체 소멸자 "),t("code",[s._v("finalizer")]),s._v(" "),t("code",[s._v("cleaner")])]),s._v(" "),t("ul",[t("li",[s._v("예측이 어려움")]),s._v(" "),t("li",[s._v("일반적으로 불필요함")]),s._v(" "),t("li",[s._v("오동작, 낮은성능, 이식성 문제, 위험성")])]),s._v(" "),t("h3",{attrs:{id:"즉시-실행된다는-보장이-없다"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#즉시-실행된다는-보장이-없다"}},[s._v("#")]),s._v(" 즉시 실행된다는 보장이 없다.")]),s._v(" "),t("ul",[t("li",[s._v("객체에 접근할 수 없게 된 후 finalizer / cleaner 의 수행시점을 알 수 없다.")]),s._v(" "),t("li",[s._v("finalizer / cleaner 의 수행은, 전적으로 GC 알고리즘에 달렸다.")]),s._v(" "),t("li",[s._v("finalizer 스레드는 다른 애플리케이션 스레드보다 우선순위가 낮아 실행 기회를 제대로 얻지 못할 수 있다.")]),s._v(" "),t("li",[s._v("cleaner 는 자신을 수행할 스레드를 제어할 수 있다.")])]),s._v(" "),t("h3",{attrs:{id:"수행-여부를-보장하지-않는다"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#수행-여부를-보장하지-않는다"}},[s._v("#")]),s._v(" 수행 여부를 보장하지 않는다.")]),s._v(" "),t("p",[s._v("데이터베이스 같은 공유 자원의 영구 Lock 해제를 finalizer 나 cleaner 에 맡겨 놓으면 분산 시스템 전체가 서서히 멈출것 ?")]),s._v(" "),t("ul",[t("li",[s._v("상태를 영구적으로 수정하는 작업에서는 절대 의존해선 안된다.")])]),s._v(" "),t("h3",{attrs:{id:"finalizer-동작-중-발생한-예외는-무시된다"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#finalizer-동작-중-발생한-예외는-무시된다"}},[s._v("#")]),s._v(" finalizer 동작 중 발생한 예외는 무시된다.")]),s._v(" "),t("p",[s._v("경고 조차 출력하지 않음.")]),s._v(" "),t("p",[s._v("잡지 못한 예외 때문에 해당 객체는 자칫 마무리가 덜 된 상태로 남을 수 있다.")]),s._v(" "),t("ul",[t("li",[s._v("cleaner 를 사용하는 라이브러리는 자신의 스레드를 통제하기 때문에 이런 문제가 없다.")])]),s._v(" "),t("h3",{attrs:{id:"심각한-성능-문제"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#심각한-성능-문제"}},[s._v("#")]),s._v(" 심각한 성능 문제")]),s._v(" "),t("p",[s._v("GC 의 효율을 떨어 뜨린다.")]),s._v(" "),t("h3",{attrs:{id:"finalizer-공격에-노출되어-심각한-보안-문제"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#finalizer-공격에-노출되어-심각한-보안-문제"}},[s._v("#")]),s._v(" finalizer 공격에 노출되어 심각한 보안 문제")]),s._v(" "),t("p",[s._v("finalizer 공격 원리")]),s._v(" "),t("ul",[t("li",[s._v("생성자나 직렬화 과정에서 예외가 발생하면,"),t("br"),s._v("\n생성 되다만 객체에서 악의적인 하위 클래스의 finalizer 가 수행될 수 있다.")])]),s._v(" "),t("h4",{attrs:{id:"악의적인-하위-클래스의-finalizer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#악의적인-하위-클래스의-finalizer"}},[s._v("#")]),s._v(" 악의적인 하위 클래스의 finalizer")]),s._v(" "),t("ul",[t("li",[s._v("finalizer 는 정적 필드에 자신의 참조를 할당하여 GC 가 수집하지 못하게함")])]),s._v(" "),t("p",[s._v("객체 생성을 막으려면 생성자에서 예외를 던지는 것만으로 충분하지만, finalizer 가 있다면 그렇지 않다.")]),s._v(" "),t("ul",[t("li",[s._v("final 클래스는 하위 클래스를 만들수 없으니 finalizer 공격에서 안전함.")]),s._v(" "),t("li",[s._v("final 클래스가 아니면, 아무일도 하지 않는 finalize 메서드를 만들고 final 로 선언하자.")])]),s._v(" "),t("blockquote",[t("p",[s._v("?? 실제 finalizer 공격이 발생한 사례가 무엇이 있을까?")])]),s._v(" "),t("h2",{attrs:{id:"finalizer-cleaner-의-대안"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#finalizer-cleaner-의-대안"}},[s._v("#")]),s._v(" finalizer / cleaner 의 대안")]),s._v(" "),t("h3",{attrs:{id:"autoclosable-의-구현"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#autoclosable-의-구현"}},[s._v("#")]),s._v(" AutoClosable 의 구현")]),s._v(" "),t("h3",{attrs:{id:"클라이언트에서-인스턴스를-다-쓰고나면-close-메서드-호출"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#클라이언트에서-인스턴스를-다-쓰고나면-close-메서드-호출"}},[s._v("#")]),s._v(" 클라이언트에서 인스턴스를 다 쓰고나면 close 메서드 호출")]),s._v(" "),t("p",[s._v("예외가 발생해도 제대로 종료되도록 "),t("code",[s._v("try-with-resources")]),s._v(" 를 사용 [9]")]),s._v(" "),t("h3",{attrs:{id:"인스턴스-자신이-닫혔는지-추적하기"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#인스턴스-자신이-닫혔는지-추적하기"}},[s._v("#")]),s._v(" 인스턴스 자신이 닫혔는지 추적하기")]),s._v(" "),t("ol",[t("li",[s._v("close 메서드 에서, 객체가 유효하지 않음을 필드에 기록한다.")]),s._v(" "),t("li",[s._v("다른 메서드는 이 필드를 검사해서 객체가 닫힌 후 불렸다면 IllegalStateException 을 던진다.")])]),s._v(" "),t("blockquote",[t("p",[s._v("?? 2 번의 방법은 어떻게 쓰이는 것일까? 얼마나 쓰일까?")])]),s._v(" "),t("h2",{attrs:{id:"finalizer-cleaner-의-쓰임새"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#finalizer-cleaner-의-쓰임새"}},[s._v("#")]),s._v(" finalizer / cleaner 의 쓰임새")]),s._v(" "),t("h3",{attrs:{id:"클라이언트가-하지-않은-자원회수를-늦게라도-해주는게-낫다"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#클라이언트가-하지-않은-자원회수를-늦게라도-해주는게-낫다"}},[s._v("#")]),s._v(" 클라이언트가 하지 않은 자원회수를 늦게라도 해주는게 낫다.")]),s._v(" "),t("p",[s._v("FileInputStrean, FileOutputStream, ThreadPoolExecutor 가 대표적으로\n안전망 역할의 finalizer 를 제공함.")]),s._v(" "),t("h3",{attrs:{id:"네이티브-피어와-연결된-객체"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#네이티브-피어와-연결된-객체"}},[s._v("#")]),s._v(" 네이티브 피어와 연결된 객체")]),s._v(" "),t("h4",{attrs:{id:"native-peer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#native-peer"}},[s._v("#")]),s._v(" Native Peer")]),s._v(" "),t("ul",[t("li",[s._v("일반 자바 객체가 네이티브 메서드를 통해 기능을 위임한 네이티브 객체")]),s._v(" "),t("li",[s._v("네이티브 피어는 자바 객체가 아니니 GC 는 존재를 알지 못하여 회수하지 않음")])]),s._v(" "),t("h4",{attrs:{id:"조건"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#조건"}},[s._v("#")]),s._v(" 조건")]),s._v(" "),t("ul",[t("li",[s._v("성능저하를 감당할 수 있어야 한다.")]),s._v(" "),t("li",[s._v("네이티브피어가 심각한 자원??을 가지고 있지 않아야 한다.")])]),s._v(" "),t("h4",{attrs:{id:"close-메서드"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#close-메서드"}},[s._v("#")]),s._v(" close 메서드")]),s._v(" "),t("ul",[t("li",[s._v("성능저하를 감당할 수 없음")]),s._v(" "),t("li",[s._v("네이티브 피어가 사용하는 자원을 즉시 회수해야 할 경우")])]),s._v(" "),t("p",[s._v("close 메서드를 사용해야 한다.")]),s._v(" "),t("h3",{attrs:{id:"cleaner"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cleaner"}},[s._v("#")]),s._v(" cleaner")]),s._v(" "),t("p",[s._v("cleaner 는 사용하기에 조금 까다롭다.")]),s._v(" "),t("p",[s._v("Room 클래스로 이 기능을 설명하고 있다.")]),s._v(" "),t("ul",[t("li",[s._v("room 을 수거하기 전, 반드시 clean 청소 해야 한다.")]),s._v(" "),t("li",[s._v("Room 클래스는 AutoCloseable 을 구현한다.")]),s._v(" "),t("li",[s._v("자동 청소 안전망이 cleaner 를 사용하지 말지는 내부 구현 방식에 관한 문제다.\n"),t("ul",[t("li",[s._v("finalizer 와 달리 cleaner 클래스의 public API 에 나타나지 않는다. ??")])])])]),s._v(" "),t("p",[s._v("cleaner 를 안전망으로 활용하는 AutoCloseable 클래스")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Room")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("implements")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AutoCloseable")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Cleaner")]),s._v(" cleaner "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Cleaner")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("create")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        \n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 청소가 필요한 자원. 절대 Room 을 참조해선 안된다.")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Room 인스턴스를 호출할 경우 순환참조가 생겨 GC 가 Room 인스턴스를 회수하지 않음")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 정적이 아닌 중첩 클래스는 자동으로 바깥 객체의 참조를 갖는다.")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 람다도 바깥객체의 참조를 갖기 쉽다.")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("State")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("implements")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Runnable")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" numJunkPiles"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Room 안의 쓰레기 수")]),s._v("\n        \n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("State")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" numJunkPiles"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("numJunkPiles "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" numJunkPiles"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    \n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// close 메서드나, cleaner 가 호출된다. .. ")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// cleanable 에 의해 딱 한번 호출된다고 함.")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 보통은 Room 의 close 를 호출할 때 호출됨")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// GC 가 Room 을 회수할 때까지 클라이언트가 close 를 호출하지 않는다면 ")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// cleaner 가 State 의 run 메서드를 호출 할 것임.")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("run")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"방 청소"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            numJunkPiles "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 방의 상태, cleanable 과 공유함.")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("State")]),s._v(" state"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Cleanable 객체, 수거 대상이 되면 방을 청소한다.")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Cleaner")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Cleanable")]),s._v(" cleanable"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Room")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" numJunkPiles"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        state "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("State")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("numJunkPiles"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        cleanable "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" cleaner"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("register")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" state"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("close")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        cleanable"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("clean")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br")])]),t("p",[s._v("클라이언트가 모든 Room 생성을 "),t("code",[s._v("try-with-resources")]),s._v(" 블록으로 감쌌다면 자동 청소는 전혀 필요하지 않다.\n"),t("code",[s._v('System.out.println("방 청소");')]),s._v(" 가 같이 실행 될 것이다.")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Adult")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" args"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Room")]),s._v(" myRoom "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Room")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hi~"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("만약 "),t("code",[s._v("try-with-resources")]),s._v(" 블록 이 없다면,\n"),t("code",[s._v('System.out.println("방 청소");')]),s._v(" 가 출력되지 않을 수 있다.\nclean 의 예측할 수 없는 특징 때문이다.")])])}),[],!1,null,null,null);a.default=e.exports}}]);